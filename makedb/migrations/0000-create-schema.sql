-- Active: 1750454634042@@127.0.0.1@5432@postgres@public

DO $$
DECLARE 
    dom INT := (SELECT COUNT(*)
                FROM pg_catalog.pg_type
                WHERE typname = 'fixed_bytea');
BEGIN
IF dom = 0 THEN
CREATE DOMAIN fixed_bytea AS bytea
    CONSTRAINT fixed_length CHECK (octet_length(value) = 300)
    CONSTRAINT default_val DEFAULT '\x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000'::bytea;
END IF;

CREATE TABLE IF NOT EXISTS button (
    x_coord int NOT NULL,
    y_coord int NOT NULL,
    buttons fixed_bytea NOT NULL,
    version int NOT NULL DEFAULT (0),
    PRIMARY KEY(x_coord, y_coord)
);

COMMENT ON TABLE button IS 'Holds the button states';
END $$;